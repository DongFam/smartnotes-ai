# SmartNote AI Environment Variables
# Copy this file to .env and fill in your actual values
# NEVER commit the actual .env file to version control

# ============================================
# APPLICATION SETTINGS
# ============================================
APP_NAME=SmartNote AI
ENVIRONMENT=development  # development | staging | production
DEBUG=true  # Set to false in production
LOG_LEVEL=INFO  # DEBUG | INFO | WARNING | ERROR | CRITICAL
SECRET_KEY=your-super-secret-key-change-this-in-production
ALLOWED_HOSTS=localhost,127.0.0.1,app.smartnoteai.com
CORS_ORIGINS=http://localhost:3000,http://localhost:8000

# ============================================
# DATABASE (PostgreSQL)
# ============================================
# Local development
DATABASE_URL=postgresql://user:pass3@localhost:5432/smartnotes-db-1

# Production (DigitalOcean Managed Database)
# DATABASE_URL=postgresql://doadmin:password@db-postgresql-nyc3-12345.b.db.ondigitalocean.com:25060/smartnote?sslmode=require

# Database Pool Settings
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=40
DB_POOL_TIMEOUT=30

# ============================================
# REDIS (Cache & Queue Broker)
# ============================================
# Local development
REDIS_URL=redis://localhost:6379/0

# Production (RedisLabs or DigitalOcean)
# REDIS_URL=redis://default:password@redis-12345.c1.us-east-1.aws.cloud.redislabs.com:12345/0

# Redis Settings
REDIS_MAX_CONNECTIONS=50
REDIS_SOCKET_TIMEOUT=5
REDIS_SOCKET_CONNECT_TIMEOUT=5

# ============================================
# AUTHENTICATION (Keycloak or Auth0)
# ============================================
# Keycloak Settings
KEYCLOAK_URL=https://auth.smartnoteai.com
KEYCLOAK_REALM=smartnote
KEYCLOAK_CLIENT_ID=backend
KEYCLOAK_CLIENT_SECRET=your-keycloak-client-secret

# JWT Settings
JWT_SECRET_KEY=your-jwt-secret-key-minimum-32-characters
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# OAuth Settings (for social login)
GOOGLE_CLIENT_ID=your-google-oauth-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-client-secret
APPLE_CLIENT_ID=com.smartnoteai.app
APPLE_TEAM_ID=your-apple-team-id
APPLE_KEY_ID=your-apple-key-id
APPLE_PRIVATE_KEY_PATH=./certs/apple-private-key.p8

# ============================================
# STORAGE (Cloudflare R2)
# ============================================
R2_ACCESS_KEY_ID=your-r2-access-key-id
R2_SECRET_ACCESS_KEY=your-r2-secret-access-key
R2_ENDPOINT_URL=https://your-account-id.r2.cloudflarestorage.com
R2_BUCKET_NAME=smartnote-storage
R2_PUBLIC_URL=https://storage.smartnoteai.com

# Storage Limits
MAX_FILE_SIZE=52428800  # 50MB in bytes
MAX_NOTE_SIZE=10485760  # 10MB in bytes
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/webp,application/pdf

# ============================================
# CDN (Cloudflare)
# ============================================
CLOUDFLARE_ZONE_ID=your-cloudflare-zone-id
CLOUDFLARE_API_TOKEN=your-cloudflare-api-token
CDN_URL=https://cdn.smartnoteai.com
MODEL_CDN_URL=https://models.smartnoteai.com

# ============================================
# EMAIL SERVICE (Resend)
# ============================================
RESEND_API_KEY=re_your_resend_api_key
FROM_EMAIL=noreply@smartnoteai.com
FROM_NAME=SmartNote AI
SUPPORT_EMAIL=support@smartnoteai.com

# Email Templates
WELCOME_EMAIL_TEMPLATE_ID=template_welcome_v1
PASSWORD_RESET_TEMPLATE_ID=template_password_reset_v1
EXPORT_READY_TEMPLATE_ID=template_export_ready_v1

# ============================================
# PAYMENT PROCESSING (Stripe)
# ============================================
STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_publishable_key
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret
STRIPE_PRICE_ID_MONTHLY=price_your_monthly_price_id
STRIPE_PRICE_ID_YEARLY=price_your_yearly_price_id

# Subscription Tiers
FREE_TIER_NOTE_LIMIT=50
FREE_TIER_STORAGE_LIMIT=104857600  # 100MB in bytes
PRO_TIER_NOTE_LIMIT=999999  # Effectively unlimited
PRO_TIER_STORAGE_LIMIT=10737418240  # 10GB in bytes

# ============================================
# TASK QUEUE (Celery)
# ============================================
CELERY_BROKER_URL=redis://localhost:6379/1
CELERY_RESULT_BACKEND=redis://localhost:6379/2
CELERY_TASK_TIME_LIMIT=300  # 5 minutes
CELERY_TASK_SOFT_TIME_LIMIT=240  # 4 minutes
CELERY_WORKER_CONCURRENCY=4
CELERY_WORKER_MAX_TASKS_PER_CHILD=1000

# ============================================
# WEBSOCKET CONFIGURATION
# ============================================
WS_HEARTBEAT_INTERVAL=30  # seconds
WS_CONNECTION_TIMEOUT=60  # seconds
WS_MAX_CONNECTIONS_PER_USER=5
WS_MESSAGE_QUEUE_SIZE=1000

# ============================================
# MACHINE LEARNING
# ============================================
# Model Paths (local development)
MODEL_PATH_BEAUTIFIER=./models/beautifier_v1.onnx
MODEL_PATH_SHAPE_DETECTOR=./models/shape_detector_v1.onnx
MODEL_PATH_OCR=./models/ocr_v1.onnx
MODEL_PATH_LAYOUT=./models/layout_analyzer_v1.onnx

# Model URLs (production CDN)
MODEL_URL_BEAUTIFIER=https://models.smartnoteai.com/beautifier_v1.onnx
MODEL_URL_SHAPE_DETECTOR=https://models.smartnoteai.com/shape_detector_v1.onnx
MODEL_URL_OCR=https://models.smartnoteai.com/ocr_v1.onnx
MODEL_URL_LAYOUT=https://models.smartnoteai.com/layout_analyzer_v1.onnx

# ML Settings
ML_BATCH_SIZE=32
ML_MAX_QUEUE_SIZE=100
ML_INFERENCE_TIMEOUT=5  # seconds
ML_MODEL_CACHE_DIR=./model_cache
ML_ENABLE_GPU=false  # Set to true if GPU available

# ============================================
# MONITORING & ANALYTICS
# ============================================
# Sentry
SENTRY_DSN=https://your-public-key@sentry.io/your-project-id
SENTRY_TRACES_SAMPLE_RATE=0.1  # 10% of transactions
SENTRY_PROFILES_SAMPLE_RATE=0.1
SENTRY_ENVIRONMENT=development
SENTRY_RELEASE=1.0.0

# Custom Analytics Database
ANALYTICS_DB_URL=postgresql://analytics:password@localhost:5432/analytics_db
ANALYTICS_RETENTION_DAYS=90
ANALYTICS_BATCH_SIZE=1000

# Metrics Collection
ENABLE_METRICS=true
METRICS_FLUSH_INTERVAL=60  # seconds
METRICS_ENDPOINT=http://localhost:9090/metrics

# ============================================
# RATE LIMITING
# ============================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_DEFAULT=100/hour
RATE_LIMIT_AUTH=20/hour
RATE_LIMIT_API=1000/hour
RATE_LIMIT_WEBSOCKET=60/minute
RATE_LIMIT_EXPORT=10/hour
RATE_LIMIT_ML_INFERENCE=100/hour

# ============================================
# SECURITY
# ============================================
# CORS
CORS_ALLOW_CREDENTIALS=true
CORS_MAX_AGE=86400

# Session
SESSION_COOKIE_SECURE=true  # Set to false for local development
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SAMESITE=lax
SESSION_LIFETIME=86400  # 24 hours in seconds

# Password Requirements
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_NUMBERS=true
PASSWORD_REQUIRE_SPECIAL=true

# Encryption
ENCRYPTION_KEY=your-32-character-encryption-key
ENCRYPTION_ALGORITHM=AES256

# ============================================
# iOS APP CONFIGURATION
# ============================================
IOS_BUNDLE_ID=com.smartnoteai.app
IOS_APP_STORE_ID=1234567890
IOS_TEAM_ID=YOUR_TEAM_ID
TESTFLIGHT_BETA_URL=https://testflight.apple.com/join/abcdefgh

# ============================================
# DEPLOYMENT & INFRASTRUCTURE
# ============================================
# DigitalOcean
DO_APP_ID=your-digitalocean-app-id
DO_SPACES_KEY=your-spaces-key
DO_SPACES_SECRET=your-spaces-secret

# Docker
DOCKER_REGISTRY=registry.digitalocean.com/smartnoteai
DOCKER_IMAGE_TAG=latest

# Domain
DOMAIN=smartnoteai.com
API_DOMAIN=api.smartnoteai.com
APP_DOMAIN=app.smartnoteai.com
ADMIN_DOMAIN=admin.smartnoteai.com

# ============================================
# FEATURE FLAGS
# ============================================
ENABLE_CLOUD_SYNC=true
ENABLE_COLLABORATION=false
ENABLE_FORMULA_RECOGNITION=false
ENABLE_ADVANCED_BEAUTIFICATION=true
ENABLE_EXPORT_PDF=true
ENABLE_EXPORT_MARKDOWN=true
ENABLE_TEMPLATES=false
ENABLE_DARK_MODE=true
ENABLE_OFFLINE_MODE=true

# ============================================
# DEVELOPMENT & TESTING
# ============================================
# Testing
TEST_DATABASE_URL=postgresql://test:test@localhost:5432/smartnote_test
TEST_REDIS_URL=redis://localhost:6379/15
PYTEST_WORKERS=4
COVERAGE_THRESHOLD=80

# Local Development
HOT_RELOAD=true
MOCK_PAYMENTS=true  # Use Stripe test mode
MOCK_EMAIL=true  # Log emails instead of sending
LOCAL_STORAGE=true  # Use local filesystem instead of R2
SEED_DATABASE=true  # Create sample data on startup

# Debug
DEBUG_SQL=false  # Log all SQL queries
DEBUG_REDIS=false  # Log Redis operations
DEBUG_WEBSOCKET=false  # Log WebSocket messages
DEBUG_ML=false  # Log ML inference details

# ============================================
# THIRD PARTY INTEGRATIONS (Future)
# ============================================
# Google Drive
GOOGLE_DRIVE_CLIENT_ID=
GOOGLE_DRIVE_CLIENT_SECRET=
GOOGLE_DRIVE_REDIRECT_URI=

# Dropbox
DROPBOX_APP_KEY=
DROPBOX_APP_SECRET=

# Notion
NOTION_CLIENT_ID=
NOTION_CLIENT_SECRET=

# ============================================
# ADMIN SETTINGS
# ============================================
ADMIN_EMAIL=admin@smartnoteai.com
ADMIN_USERNAME=admin
ADMIN_INITIAL_PASSWORD=change-this-immediately
ADMIN_DASHBOARD_URL=https://admin.smartnoteai.com
ENABLE_ADMIN_PANEL=false  # Only enable in development

# ============================================
# BACKUP & RECOVERY
# ============================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 3 * * *  # 3 AM daily
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=smartnote-backups
BACKUP_ENCRYPTION_KEY=your-backup-encryption-key

# ============================================
# LOCALIZATION
# ============================================
DEFAULT_LANGUAGE=en
SUPPORTED_LANGUAGES=en,es,fr,de,ja,zh
TIMEZONE=UTC

# ============================================
# API KEYS FOR EXTERNAL SERVICES
# ============================================
# Weather API (for demo/testing)
OPENWEATHER_API_KEY=

# IP Geolocation (for analytics)
IPINFO_TOKEN=

# Error tracking
BUGSNAG_API_KEY=

# Logging
LOGTAIL_SOURCE_TOKEN=

# ============================================
# PERFORMANCE TUNING
# ============================================
# Backend
WORKERS=4  # Gunicorn workers
THREADS=2  # Threads per worker
WORKER_CONNECTIONS=1000
KEEPALIVE=5

# Database
CONNECTION_POOL_SIZE=20
STATEMENT_TIMEOUT=30000  # 30 seconds in milliseconds

# Cache
CACHE_TTL_DEFAULT=3600  # 1 hour
CACHE_TTL_USER_SESSION=86400  # 24 hours
CACHE_TTL_STATIC_CONTENT=604800  # 1 week